task releaseTarZip(type: Zip) {
    dependsOn(':taotao-cloud-tx:taotao-cloud-tx-server:jar')

    archiveFileName = "${project.name}.zip"

    from("${project.projectDir}/bin") {
        include '**'

        into "bin"
    }

    from("${project.projectDir}/conf") {
        include '**'

        into "conf"
    }

    from "${project.projectDir}/LICENSE-BIN" rename {String filename -> filename.replace("-BIN", "")}
    from "${project.projectDir}/NOTICE-BIN" rename {String filename -> filename.replace("-BIN", "")}

    from("${project.parent.projectDir}/taotao-cloud-tx-server/build/libs") {
        include '*.jar'

        into "target"
    }

}

tasks.create(name: "releaseTarGz", type: Tar) {
    dependsOn(':taotao-cloud-tx:taotao-cloud-tx-server:jar')

    into "${project.name}"
    compression = Compression.GZIP
    archiveAppendix = "${project.name}"
    archiveBaseName = "${project.name}"
    archiveVersion = "${project.name}"
    archiveClassifier = "${project.name}"
    archiveExtension = 'tar.gz'

    from("${project.projectDir}/bin") {
        include '**'

        into "bin"
    }

    from("${project.projectDir}/conf") {
        include '**'

        into "conf"
    }

    from "${project.projectDir}/LICENSE-BIN" rename {String filename -> filename.replace("-BIN", "")}
    from "${project.projectDir}/NOTICE-BIN" rename {String filename -> filename.replace("-BIN", "")}

    from("${project.parent.projectDir}/taotao-cloud-tx-server/build/libs") {
        include '*.jar'

        into "target"
    }

    duplicatesStrategy 'exclude'
}
