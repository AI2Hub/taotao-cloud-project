//https://nightlies.apache.org/flink/flink-docs-release-1.18/docs/dev/configuration/overview/
dependencies {
    implementation 'org.apache.flink:flink-runtime-web:1.15.0'
    implementation 'org.apache.flink:flink-table-planner_2.12:1.15.0'
    implementation 'org.apache.flink:flink-java:1.15.0'
    implementation 'org.apache.flink:flink-streaming-java:1.15.0'
    implementation 'org.apache.flink:flink-clients:1.15.0'
    implementation 'org.apache.flink:flink-connector-base:1.15.0'
    implementation 'org.apache.flink:flink-table-common:1.15.0'
    implementation 'org.apache.flink:flink-table-api-java-bridge:1.15.0'
    implementation 'org.apache.flink:flink-table-runtime:1.15.0'
    implementation 'org.apache.flink:flink-queryable-state-runtime:1.15.0'
    implementation 'org.apache.flink:flink-avro:1.15.0'

    implementation 'org.apache.rocketmq:rocketmq-client:4.9.2'
    implementation 'org.apache.rocketmq:rocketmq-acl:4.9.2'
    implementation 'org.apache.rocketmq:rocketmq-common:4.9.2'
    implementation 'org.apache.rocketmq:rocketmq-namesrv:4.9.2'
    implementation 'org.apache.rocketmq:rocketmq-broker:4.9.2'
    implementation 'org.apache.rocketmq:rocketmq-test:4.9.2'
    implementation 'org.apache.rocketmq:schema-registry-client:0.1.0'

    implementation 'commons-lang:commons-lang:2.6'
    implementation 'com.googlecode.aviator:aviator:5.3.1'

    testImplementation 'junit:junit:4.13.2'
    testImplementation 'org.powermock:powermock-module-junit4:1.5.5'
    testImplementation 'org.powermock:powermock-api-mockito:1.5.5'

}

configurations {
    all {
        resolutionStrategy.cacheChangingModulesFor 0, "seconds"
        resolutionStrategy.cacheDynamicVersionsFor 0, "seconds"

        resolutionStrategy {
            force 'org.glassfish:javax.el:3.0.0'
        }
    }
}

tasks.withType(ScalaCompile) {
    scalaCompileOptions.additionalParameters = ['-unchecked', '-deprecation']
}

jar {
    //详细信息参考 https://docs.gradle.org/current/dsl/org.gradle.api.tasks.bundling.Jar.html
    //archivesBaseName = 'Example'//基本的文件名
    //文件夹大于65535个，需要开启zip64
    //zip64=true

    manifest {
        attributes 'Main-Class': "com.taotao.cloud.bigdata.flink.JStreamWordCount"
    }
    //from sourceSets.main.output
    //dependsOn configurations.runtimeClasspath

    //gradle 处理重复文件，include 最后一个重复文件“胜出”的默认策略。
    //duplicatesStrategy = 'include' // <<---- addition
    duplicatesStrategy = DuplicatesStrategy.EXCLUDE

    //打包依赖包
    //from {
    //    (configurations.runtimeClasspath).collect {
    //        it.isDirectory() ? it : zipTree(it)
    //    }
    //}
    //into('lib') { // 将第三方jar放入 lib目录中
    //    from configurations.compile
    //}
}


